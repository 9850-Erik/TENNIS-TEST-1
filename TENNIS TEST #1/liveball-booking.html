<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Liveball with Erik</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Helvetica Neue', Arial, sans-serif; background: #f9f9f7; color: #1a1a1a; min-height: 100vh; }

    nav { display: flex; justify-content: space-between; align-items: center; padding: 20px 40px; border-bottom: 1px solid #e8e8e8; background: #fff; position: sticky; top: 0; z-index: 100; }
    .logo { font-size: 1.15rem; font-weight: 700; letter-spacing: -0.5px; }
    .logo span { color: #4caf50; }
    .admin-btn { background: none; border: 1.5px solid #e8e8e8; border-radius: 8px; padding: 7px 14px; font-size: 0.82rem; font-weight: 600; color: #888; cursor: pointer; font-family: inherit; transition: all 0.2s; }
    .admin-btn:hover { border-color: #1a1a1a; color: #1a1a1a; }

    .view { display: none; }
    .view.active { display: block; }

    /* PLAYER */
    .hero { text-align: center; padding: 64px 24px 48px; position: relative; overflow: hidden; }
    .hero svg.bg-ball { position: absolute; pointer-events: none; opacity: 0.08; }
    .hero h1 { font-size: clamp(2rem, 5vw, 3rem); font-weight: 800; letter-spacing: -1px; margin-bottom: 12px; position: relative; }
    .hero p { color: #666; font-size: 1rem; max-width: 420px; margin: 0 auto; line-height: 1.6; position: relative; }
    .pill { display: inline-block; background: #eafbea; color: #2e7d32; border-radius: 100px; padding: 5px 14px; font-size: 0.8rem; font-weight: 600; margin-bottom: 16px; position: relative; }

    .section { max-width: 820px; margin: 0 auto; padding: 0 24px 60px; }
    .section-label { font-size: 0.78rem; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: #bbb; margin-bottom: 16px; }

    .sessions-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(210px, 1fr)); gap: 14px; margin-bottom: 24px; }
    .session-card { background: #fff; border: 1.5px solid #e8e8e8; border-radius: 12px; padding: 18px; cursor: pointer; transition: border-color 0.2s, box-shadow 0.2s; position: relative; }
    .session-card:hover:not(.is-full) { border-color: #4caf50; box-shadow: 0 2px 12px rgba(76,175,80,0.1); }
    .session-card.selected { border-color: #4caf50; background: #f6fff6; }
    .session-card.is-full { opacity: 0.5; cursor: not-allowed; }
    .card-name { font-size: 1.05rem; font-weight: 800; margin-bottom: 4px; letter-spacing: -0.3px; }
    .card-date { font-size: 0.75rem; color: #999; margin-bottom: 3px; }
    .card-time { font-size: 1rem; font-weight: 700; margin-bottom: 10px; }
    .card-spots { font-size: 0.8rem; color: #666; }
    .spots-bar { height: 4px; background: #eee; border-radius: 4px; margin-top: 8px; overflow: hidden; }
    .spots-fill { height: 100%; background: #4caf50; border-radius: 4px; }
    .card-badge { position: absolute; top: 12px; right: 12px; font-size: 0.7rem; font-weight: 700; padding: 2px 8px; border-radius: 100px; }

    /* ROSTER EXPAND */
    .roster-toggle { display: flex; align-items: center; gap: 5px; font-size: 0.74rem; font-weight: 700; color: #4caf50; cursor: pointer; background: none; border: none; font-family: inherit; padding: 0; margin-top: 10px; }
    .roster-toggle svg { transition: transform 0.25s; }
    .roster-toggle.open svg { transform: rotate(180deg); }
    .roster-expand { max-height: 0; overflow: hidden; transition: max-height 0.35s ease; }
    .roster-expand.open { max-height: 300px; }
    .roster-inner { margin-top: 10px; padding-top: 10px; border-top: 1px solid #f0f0f0; }
    .roster-inner .r-title { font-size: 0.67rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.8px; color: #bbb; margin-bottom: 7px; }
    .names-list { display: flex; flex-wrap: wrap; gap: 5px; }
    .name-chip { background: #f4f4f4; border-radius: 100px; padding: 3px 10px; font-size: 0.75rem; font-weight: 600; color: #333; }
    .roster-pw-box { margin-top: 8px; background: #f9f9f7; border-radius: 8px; padding: 8px 10px; }
    .roster-pw-box p { font-size: 0.7rem; color: #999; margin-bottom: 5px; }
    .roster-pw-row { display: flex; gap: 5px; }
    .roster-pw-input { flex: 1; padding: 5px 8px; border: 1.5px solid #e8e8e8; border-radius: 6px; font-size: 0.74rem; font-family: inherit; outline: none; }
    .roster-pw-input:focus { border-color: #4caf50; }
    .roster-pw-btn { background: #1a1a1a; color: #fff; border: none; border-radius: 6px; padding: 5px 10px; font-size: 0.72rem; font-weight: 700; cursor: pointer; font-family: inherit; }

    /* ADMIN ROSTER TOGGLE */
    .roster-settings-box { background: #fff; border-radius: 12px; padding: 20px 24px; margin-bottom: 28px; border: 1.5px solid #e8e8e8; }
    .roster-settings-box h3 { font-size: 0.82rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; color: #aaa; margin-bottom: 12px; }
    .toggle-row { display: flex; align-items: center; justify-content: space-between; gap: 16px; }
    .toggle-label { font-size: 0.88rem; font-weight: 600; color: #333; }
    .toggle-sub { font-size: 0.74rem; color: #aaa; margin-top: 2px; }
    .toggle-switch { position: relative; width: 44px; height: 24px; flex-shrink: 0; cursor: pointer; }
    .toggle-switch input { opacity: 0; width: 0; height: 0; }
    .toggle-slider { position: absolute; inset: 0; background: #e8e8e8; border-radius: 100px; transition: background 0.2s; }
    .toggle-slider:before { content:''; position: absolute; width: 18px; height: 18px; left: 3px; top: 3px; background: #fff; border-radius: 50%; transition: transform 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.15); }
    .toggle-switch input:checked + .toggle-slider { background: #4caf50; }
    .toggle-switch input:checked + .toggle-slider:before { transform: translateX(20px); }
    .roster-pw-setting { margin-top: 14px; padding-top: 14px; border-top: 1px solid #f0f0f0; display: none; }
    .roster-pw-setting.visible { display: block; }
    .roster-pw-setting label { display: block; font-size: 0.74rem; font-weight: 700; color: #888; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 0.4px; }
    .roster-pw-setting-row { display: flex; gap: 8px; }
    .roster-pw-setting-input { flex: 1; padding: 8px 11px; border: 1.5px solid #e8e8e8; border-radius: 8px; font-size: 0.88rem; font-family: inherit; outline: none; }
    .roster-pw-setting-input:focus { border-color: #4caf50; }
    .roster-pw-save { background: #1a1a1a; color: #fff; border: none; border-radius: 8px; padding: 8px 16px; font-size: 0.82rem; font-weight: 700; cursor: pointer; font-family: inherit; white-space: nowrap; }
    .roster-pw-save:hover { background: #333; }
    .badge-open { background: #eafbea; color: #2e7d32; }
    .badge-full { background: #ffeaea; color: #c62828; }

    .empty-state { text-align: center; padding: 48px 24px; color: #aaa; font-size: 0.92rem; background: #fff; border: 1.5px dashed #e8e8e8; border-radius: 12px; margin-bottom: 24px; }
    .empty-state .big { font-size: 2.5rem; margin-bottom: 10px; }

    .booking-form { background: #fff; border: 1.5px solid #e8e8e8; border-radius: 16px; padding: 28px; }
    .booking-form h2 { font-size: 1.1rem; font-weight: 700; margin-bottom: 20px; }
    .slot-summary { background: #eafbea; border-radius: 8px; padding: 10px 14px; font-size: 0.86rem; color: #2e7d32; font-weight: 600; margin-bottom: 18px; display: none; }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }
    .form-group { margin-bottom: 16px; }
    .form-group label { display: block; font-size: 0.78rem; font-weight: 700; color: #777; margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.4px; }
    .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 10px 13px; border: 1.5px solid #e8e8e8; border-radius: 8px; font-size: 0.93rem; font-family: inherit; background: #fafafa; transition: border-color 0.2s; outline: none; }
    .form-group input:focus, .form-group select:focus { border-color: #4caf50; background: #fff; }

    .skill-options { display: flex; gap: 8px; flex-wrap: wrap; }
    .skill-btn { padding: 7px 16px; border: 1.5px solid #e8e8e8; border-radius: 100px; background: #fff; font-size: 0.83rem; cursor: pointer; transition: all 0.2s; font-family: inherit; }
    .skill-btn:hover { border-color: #4caf50; }
    .skill-btn.active { background: #4caf50; color: #fff; border-color: #4caf50; }

    .payment-options { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .payment-card { border: 1.5px solid #e8e8e8; border-radius: 10px; padding: 13px 15px; cursor: pointer; transition: all 0.2s; }
    .payment-card:hover { border-color: #4caf50; }
    .payment-card.active { border-color: #4caf50; background: #f6fff6; }
    .pay-title { font-weight: 700; font-size: 0.88rem; margin-bottom: 2px; }
    .pay-desc { font-size: 0.76rem; color: #888; }
    .pay-info { margin-top: 12px; border-radius: 8px; padding: 12px 14px; font-size: 0.84rem; line-height: 1.6; display: none; }
    .pay-info.venmo { background: #f0f4ff; color: #333; }
    .pay-info.arrival { background: #fffbea; color: #333; }

    .submit-btn { width: 100%; padding: 14px; background: #1a1a1a; color: #fff; border: none; border-radius: 10px; font-size: 0.97rem; font-weight: 700; cursor: pointer; margin-top: 6px; transition: background 0.2s; font-family: inherit; }
    .submit-btn:hover { background: #333; }

    .success-screen { display: none; text-align: center; padding: 80px 24px; }
    .success-screen .icon { font-size: 3.5rem; margin-bottom: 18px; }
    .success-screen h2 { font-size: 1.5rem; font-weight: 800; margin-bottom: 10px; }
    .success-screen p { color: #666; max-width: 340px; margin: 0 auto 24px; }
    .success-screen button { background: #1a1a1a; color: #fff; border: none; border-radius: 8px; padding: 11px 26px; font-size: 0.93rem; cursor: pointer; font-family: inherit; font-weight: 600; }

    /* ADMIN */
    #adminView { background: #f4f4f2; min-height: 100vh; }
    .admin-header { background: #1a1a1a; color: #fff; padding: 28px 40px; display: flex; justify-content: space-between; align-items: center; }
    .admin-header h1 { font-size: 1.2rem; font-weight: 700; }
    .admin-header .sub { font-size: 0.8rem; color: #888; margin-top: 2px; }
    .exit-btn { background: #333; border: none; color: #fff; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-family: inherit; font-size: 0.83rem; font-weight: 600; }
    .exit-btn:hover { background: #444; }

    .admin-body { max-width: 860px; margin: 0 auto; padding: 36px 24px; }

    .share-box { background: #fff; border-radius: 12px; padding: 20px 24px; margin-bottom: 28px; border: 1.5px solid #e8e8e8; }
    .share-box h3 { font-size: 0.82rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; color: #aaa; margin-bottom: 10px; }
    .share-row { display: flex; gap: 10px; align-items: center; }
    .share-input { flex: 1; padding: 9px 13px; border: 1.5px solid #e8e8e8; border-radius: 8px; font-size: 0.82rem; font-family: monospace; background: #fafafa; outline: none; color: #555; }
    .copy-btn { background: #1a1a1a; color: #fff; border: none; border-radius: 8px; padding: 9px 18px; font-size: 0.82rem; font-weight: 700; cursor: pointer; font-family: inherit; white-space: nowrap; }
    .copy-btn:hover { background: #333; }
    .share-hint { font-size: 0.76rem; color: #bbb; margin-top: 8px; }

    .add-card { background: #fff; border-radius: 12px; padding: 24px; margin-bottom: 28px; border: 1.5px solid #e8e8e8; }
    .add-card h3 { font-size: 1rem; font-weight: 700; margin-bottom: 18px; }
    .add-row { display: grid; grid-template-columns: 1fr 1fr 110px 100px auto; gap: 12px; align-items: end; }
    .price-tag { display: inline-block; background: #f0fdf4; color: #166534; font-size: 0.78rem; font-weight: 700; padding: 2px 8px; border-radius: 100px; margin-left: 6px; }
    .cancel-link { display: block; text-align: center; margin-top: 14px; font-size: 0.8rem; color: #bbb; cursor: pointer; }
    .cancel-link:hover { color: #ef4444; }
    .cancel-screen { display: none; text-align: center; padding: 80px 24px; }
    .cancel-screen .icon { font-size: 3rem; margin-bottom: 16px; }
    .cancel-screen h2 { font-size: 1.4rem; font-weight: 800; margin-bottom: 10px; }
    .cancel-screen p { color: #666; max-width: 340px; margin: 0 auto 24px; font-size: 0.9rem; line-height: 1.6; }
    .cancel-confirm-btn { background: #ef4444; color: #fff; border: none; border-radius: 8px; padding: 11px 24px; font-size: 0.9rem; cursor: pointer; font-family: inherit; font-weight: 600; margin-right: 8px; }
    .cancel-back-btn { background: #f0f0f0; color: #555; border: none; border-radius: 8px; padding: 11px 24px; font-size: 0.9rem; cursor: pointer; font-family: inherit; font-weight: 600; }
    .card-price { font-size: 0.85rem; font-weight: 700; color: #2e7d32; margin-top: 6px; }
    .add-row .fg { }
    .add-row .fg label { display: block; font-size: 0.74rem; font-weight: 700; color: #888; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 0.4px; }
    .add-row input, .add-row select { width: 100%; padding: 10px 12px; border: 1.5px solid #e8e8e8; border-radius: 8px; font-size: 0.9rem; font-family: inherit; outline: none; background: #fafafa; }
    .add-row input:focus, .add-row select:focus { border-color: #4caf50; background: #fff; }
    .add-btn { background: #4caf50; color: #fff; border: none; border-radius: 8px; padding: 0 20px; font-size: 0.9rem; font-weight: 700; cursor: pointer; font-family: inherit; height: 42px; white-space: nowrap; }
    .add-btn:hover { background: #43a047; }

    .list-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
    .list-header h3 { font-size: 1rem; font-weight: 700; }
    .list-header .ct { font-size: 0.8rem; color: #aaa; }
    .admin-row { background: #fff; border: 1.5px solid #e8e8e8; border-radius: 10px; padding: 15px 20px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; gap: 16px; }
    .row-info .dt { font-weight: 700; font-size: 0.93rem; }
    .row-info .sp { font-size: 0.78rem; color: #999; margin-top: 3px; }
    .mini-bar { width: 80px; height: 4px; background: #eee; border-radius: 4px; overflow: hidden; margin-top: 6px; }
    .mini-fill { height: 100%; background: #4caf50; border-radius: 4px; }
    .del-btn { background: none; border: 1.5px solid #fca5a5; color: #ef4444; border-radius: 7px; padding: 6px 12px; font-size: 0.78rem; font-weight: 600; cursor: pointer; font-family: inherit; transition: all 0.2s; }
    .del-btn:hover { background: #fef2f2; }
    .edit-btn { background: none; border: 1.5px solid #e8e8e8; color: #555; border-radius: 7px; padding: 6px 12px; font-size: 0.78rem; font-weight: 600; cursor: pointer; font-family: inherit; transition: all 0.2s; margin-right: 6px; }
    .edit-btn:hover { border-color: #1a1a1a; color: #1a1a1a; }

    /* EDIT MODAL */
    .edit-modal-bg { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 999; padding: 24px; }
    .edit-modal-bg.open { display: flex; }
    .edit-modal { background: #fff; border-radius: 16px; padding: 32px; width: 100%; max-width: 460px; }
    .edit-modal h2 { font-size: 1.05rem; font-weight: 800; margin-bottom: 20px; }
    .edit-modal .fg { margin-bottom: 14px; }
    .edit-modal .fg label { display: block; font-size: 0.75rem; font-weight: 700; color: #888; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 0.4px; }
    .edit-modal .fg input, .edit-modal .fg select { width: 100%; padding: 10px 12px; border: 1.5px solid #e8e8e8; border-radius: 8px; font-size: 0.9rem; font-family: inherit; outline: none; background: #fafafa; }
    .edit-modal .fg input:focus, .edit-modal .fg select:focus { border-color: #4caf50; background: #fff; }
    .edit-modal-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    .edit-modal-btns { display: flex; gap: 10px; margin-top: 20px; }
    .edit-modal-btns button { flex: 1; padding: 11px; border-radius: 8px; font-size: 0.9rem; font-weight: 700; cursor: pointer; font-family: inherit; border: none; }
    .edit-save { background: #1a1a1a; color: #fff; }
    .edit-save:hover { background: #333; }
    .edit-cancel { background: #f0f0f0; color: #555; }
    .admin-empty { text-align: center; padding: 36px; color: #ccc; background: #fff; border-radius: 12px; border: 1.5px dashed #e8e8e8; font-size: 0.9rem; }

    .bookings-section { margin-top: 36px; }
    .bookings-section h3 { font-size: 1rem; font-weight: 700; margin-bottom: 14px; }
    table { width: 100%; border-collapse: collapse; background: #fff; border-radius: 12px; overflow: hidden; border: 1.5px solid #e8e8e8; font-size: 0.83rem; }
    th { background: #f4f4f2; padding: 10px 14px; text-align: left; font-size: 0.73rem; text-transform: uppercase; letter-spacing: 0.5px; color: #aaa; font-weight: 700; border-bottom: 1px solid #e8e8e8; }
    td { padding: 11px 14px; border-bottom: 1px solid #f0f0f0; color: #333; }
    tr:last-child td { border-bottom: none; }
    .tag { display: inline-block; padding: 2px 8px; border-radius: 100px; font-size: 0.72rem; font-weight: 700; }
    .tag-skill { background: #f0f4ff; color: #3b5bdb; }
    .tag-venmo { background: #f0f4ff; color: #3b5bdb; }
    .tag-arrival { background: #fffbea; color: #92400e; }
    .no-data { text-align: center; padding: 28px; color: #ccc; }

    /* DAY-OF CHECKLIST */
    .dayof-section { margin-top: 36px; }
    .dayof-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 14px; flex-wrap: wrap; gap: 10px; }
    .dayof-header h3 { font-size: 1rem; font-weight: 700; }
    .session-tabs { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 18px; }
    .session-tab { padding: 7px 14px; border: 1.5px solid #e8e8e8; border-radius: 100px; background: #fff; font-size: 0.8rem; font-weight: 600; cursor: pointer; font-family: inherit; color: #666; transition: all 0.2s; }
    .session-tab:hover { border-color: #4caf50; color: #2e7d32; }
    .session-tab.active { background: #1a1a1a; color: #fff; border-color: #1a1a1a; }
    .checklist-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 12px; }
    .player-tile { border-radius: 12px; padding: 16px 18px; cursor: pointer; transition: all 0.2s; border: 2px solid #e8e8e8; background: #fff; user-select: none; }
    .player-tile:hover { transform: translateY(-1px); box-shadow: 0 4px 14px rgba(0,0,0,0.08); }
    .player-tile.paid { background: #f0fdf4; border-color: #4caf50; }
    .player-tile.unpaid { background: #fff5f5; border-color: #ef4444; }
    .player-tile .pname { font-weight: 700; font-size: 0.95rem; margin-bottom: 4px; }
    .player-tile.paid .pname { color: #166534; }
    .player-tile.unpaid .pname { color: #991b1b; }
    .player-tile .pdetail { font-size: 0.75rem; color: #999; }
    .player-tile.paid .pdetail { color: #4ade80; }
    .player-tile.unpaid .pdetail { color: #fca5a5; }
    .player-tile .pstatus { font-size: 0.72rem; font-weight: 700; margin-top: 8px; text-transform: uppercase; letter-spacing: 0.5px; }
    .player-tile.paid .pstatus { color: #4caf50; }
    .player-tile.unpaid .pstatus { color: #ef4444; }
    .player-tile.neutral .pname { color: #333; }
    .checklist-empty { text-align: center; padding: 32px; color: #ccc; background: #fff; border-radius: 12px; border: 1.5px dashed #e8e8e8; font-size: 0.88rem; }
    .dayof-legend { font-size: 0.76rem; color: #aaa; margin-top: 12px; }
    .paid-count { font-size: 0.82rem; color: #aaa; }

    /* MODAL */
    .modal-bg { position: fixed; inset: 0; background: rgba(0,0,0,0.4); display: none; align-items: center; justify-content: center; z-index: 999; }
    .modal-bg.open { display: flex; }
    .modal { background: #fff; border-radius: 16px; padding: 36px; width: 100%; max-width: 340px; text-align: center; }
    .modal h2 { font-size: 1.05rem; font-weight: 800; margin-bottom: 6px; }
    .modal p { font-size: 0.84rem; color: #999; margin-bottom: 20px; }
    .modal input { width: 100%; padding: 11px 14px; border: 1.5px solid #e8e8e8; border-radius: 8px; font-size: 1rem; font-family: inherit; outline: none; text-align: center; letter-spacing: 2px; margin-bottom: 12px; }
    .modal input:focus { border-color: #1a1a1a; }
    .modal-btns { display: flex; gap: 10px; }
    .modal-btns button { flex: 1; padding: 11px; border-radius: 8px; font-size: 0.9rem; font-weight: 700; cursor: pointer; font-family: inherit; border: none; }
    .btn-enter { background: #1a1a1a; color: #fff; }
    .btn-cancel { background: #f0f0f0; color: #555; }
    .modal-err { color: #ef4444; font-size: 0.8rem; margin-bottom: 10px; display: none; }



    .mode-toggle-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 4px; }
    .mode-card { border: 2px solid #e8e8e8; border-radius: 12px; padding: 16px; cursor: pointer; transition: all 0.2s; text-align: center; }
    .mode-card:hover { border-color: #4caf50; }
    .mode-card.active-public { border-color: #4caf50; background: #f6fff6; }
    .mode-card.active-private { border-color: #1a1a1a; background: #f8f8f8; }
    .mode-icon { font-size: 1.5rem; margin-bottom: 6px; }
    .mode-title { font-weight: 700; font-size: 0.9rem; margin-bottom: 3px; }
    .mode-desc { font-size: 0.74rem; color: #999; line-height: 1.4; }

    /* ACCESS GATE */
    .gate-screen { position: fixed; inset: 0; background: #f9f9f7; display: none; align-items: center; justify-content: center; z-index: 9000; padding: 24px; }
    .gate-box { background: #fff; border-radius: 20px; padding: 48px 40px; max-width: 380px; width: 100%; text-align: center; border: 1.5px solid #e8e8e8; box-shadow: 0 8px 40px rgba(0,0,0,0.08); }
    .gate-box .gate-icon { font-size: 2.8rem; margin-bottom: 16px; }
    .gate-box h2 { font-size: 1.3rem; font-weight: 800; letter-spacing: -0.5px; margin-bottom: 8px; }
    .gate-box p { font-size: 0.88rem; color: #999; margin-bottom: 28px; line-height: 1.6; }
    .gate-input { width: 100%; padding: 13px 16px; border: 1.5px solid #e8e8e8; border-radius: 10px; font-size: 1rem; font-family: inherit; outline: none; text-align: center; letter-spacing: 3px; text-transform: uppercase; margin-bottom: 12px; transition: border-color 0.2s; }
    .gate-input:focus { border-color: #4caf50; }
    .gate-input.error { border-color: #ef4444; animation: shake 0.3s ease; }
    .gate-btn { width: 100%; padding: 13px; background: #1a1a1a; color: #fff; border: none; border-radius: 10px; font-size: 0.97rem; font-weight: 700; cursor: pointer; font-family: inherit; transition: background 0.2s; }
    .gate-btn:hover { background: #333; }
    .gate-err { color: #ef4444; font-size: 0.8rem; margin-bottom: 10px; display: none; }
    .gate-hint { font-size: 0.75rem; color: #ccc; margin-top: 14px; }
    @keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-6px)} 75%{transform:translateX(6px)} }

    /* ADMIN: access code setting */
    .access-code-box { background: #fff; border-radius: 12px; padding: 20px 24px; margin-bottom: 28px; border: 1.5px solid #e8e8e8; }
    .access-code-box h3 { font-size: 0.82rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; color: #aaa; margin-bottom: 10px; }
    .access-code-row { display: flex; gap: 10px; align-items: center; }
    .access-code-input { flex: 1; padding: 9px 13px; border: 1.5px solid #e8e8e8; border-radius: 8px; font-size: 0.95rem; font-family: inherit; outline: none; letter-spacing: 2px; text-transform: uppercase; }
    .access-code-input:focus { border-color: #4caf50; }
    .access-code-save { background: #1a1a1a; color: #fff; border: none; border-radius: 8px; padding: 9px 18px; font-size: 0.82rem; font-weight: 700; cursor: pointer; font-family: inherit; white-space: nowrap; }
    .access-code-save:hover { background: #333; }
    .access-code-hint { font-size: 0.76rem; color: #bbb; margin-top: 8px; }
    .code-status { font-size: 0.78rem; font-weight: 700; padding: 3px 10px; border-radius: 100px; margin-left: 8px; }
    .code-on { background: #eafbea; color: #2e7d32; }
    .code-off { background: #f4f4f2; color: #aaa; }

    .spotify-bar { background: #111; border-bottom: 1px solid #1db954; padding: 12px 40px; display: flex; align-items: center; justify-content: space-between; gap: 16px; flex-wrap: wrap; }
    .spotify-left { display: flex; align-items: center; gap: 12px; }
    .spotify-icon { width: 32px; height: 32px; flex-shrink: 0; }
    .spotify-text { font-size: 0.82rem; color: rgba(255,255,255,0.6); }
    .spotify-text strong { color: #fff; font-size: 0.88rem; display: block; margin-bottom: 1px; }
    .spotify-btn { display: inline-flex; align-items: center; gap: 7px; background: #1db954; color: #fff; font-weight: 700; font-size: 0.82rem; padding: 8px 18px; border-radius: 100px; text-decoration: none; transition: background 0.2s; white-space: nowrap; font-family: inherit; }
    .spotify-btn:hover { background: #1aa34a; }

    .toast { position: fixed; bottom: 28px; left: 50%; transform: translateX(-50%); background: #1a1a1a; color: #fff; padding: 11px 22px; border-radius: 100px; font-size: 0.84rem; font-weight: 600; opacity: 0; transition: opacity 0.3s; pointer-events: none; z-index: 9999; white-space: nowrap; }
    .toast.show { opacity: 1; }

    @media (max-width: 620px) {
      nav { padding: 16px 20px; }
      .admin-header { padding: 20px; flex-direction: column; align-items: flex-start; gap: 12px; }
      .admin-body { padding: 20px 16px; }
      .add-row { grid-template-columns: 1fr 1fr; }
      .add-row .add-btn-wrap { grid-column: span 2; }
      .add-btn { grid-column: span 2; }
      .form-row { grid-template-columns: 1fr; }
      .payment-options { grid-template-columns: 1fr; }
      .share-row { flex-direction: column; align-items: stretch; }
    }
  </style>
</head>
<body>

<div class="toast" id="toast"></div>

<!-- ACCESS GATE -->
<div class="gate-screen" id="gateScreen">
  <div class="gate-box">
    <div class="gate-icon">üéæ</div>
    <h2>Liveball with Erik</h2>
    <p>This is a private group. Enter the password Erik shared with you to continue.</p>
    <div class="gate-err" id="gateErr">Incorrect code ‚Äî try again.</div>
    <input class="gate-input" id="gateInput" type="text" placeholder="Enter password" maxlength="20"
      onkeydown="if(event.key==='Enter')checkGate()"
      oninput="this.value=this.value.toUpperCase()" />
    <button class="gate-btn" onclick="checkGate()">Enter ‚Üí</button>
    <div class="gate-hint">Don't have the password? Reach out to Erik directly.</div>
  </div>
</div>


<!-- LOGIN MODAL -->
<div class="modal-bg" id="loginModal">
  <div class="modal">
    <div style="font-size:2rem;margin-bottom:12px;">üîê</div>
    <h2>Admin Access</h2>
    <p>Enter your password to manage sessions.</p>
    <div class="modal-err" id="loginErr">Wrong password ‚Äî try again.</div>
    <input type="password" id="pwInput" placeholder="Password" onkeydown="if(event.key==='Enter')doLogin()" />
    <div class="modal-btns">
      <button class="btn-cancel" onclick="closeLogin()">Cancel</button>
      <button class="btn-enter" onclick="doLogin()">Enter ‚Üí</button>
    </div>
  </div>
</div>

<!-- NAV -->
<nav>
  <a href="index.html" style="text-decoration:none;display:flex;align-items:center;gap:10px;">
    <svg width="32" height="32" viewBox="0 0 36 36" xmlns="http://www.w3.org/2000/svg">
      <circle cx="18" cy="18" r="18" fill="#c8e63c"/>
      <path d="M 7 12 Q 13 18 7 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
      <path d="M 29 12 Q 23 18 29 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
      <text x="18" y="23" text-anchor="middle" font-family="Helvetica Neue, Arial, sans-serif" font-size="13" font-weight="900" fill="#1a1a1a">E</text>
    </svg>
    <span style="font-size:1.15rem;font-weight:700;letter-spacing:-0.5px;color:#1a1a1a;">Liveball <span style="color:#4caf50;">with Erik</span></span>
  </a>
  <div style="display:flex;align-items:center;gap:8px;">
    <a href="private-lessons.html" style="text-decoration:none;font-size:0.83rem;font-weight:600;color:#888;border:1.5px solid #e8e8e8;border-radius:8px;padding:7px 14px;transition:all 0.2s;" onmouseover="this.style.borderColor='#1a1a1a';this.style.color='#1a1a1a'" onmouseout="this.style.borderColor='#e8e8e8';this.style.color='#888'">Private Lessons</a>
    <button class="admin-btn" onclick="openLogin()">‚öôÔ∏è Admin</button>
  </div>
</nav>

<!-- SPOTIFY BAR -->
<div class="spotify-bar">
  <div class="spotify-left">
    <svg class="spotify-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12" cy="12" r="12" fill="#1db954"/>
      <path d="M17.9 10.9C14.7 9 9.35 8.8 6.3 9.75c-.5.15-1-.15-1.15-.6-.15-.5.15-1 .6-1.15 3.55-1.05 9.4-.85 13.1 1.35.45.25.6.85.35 1.3-.25.35-.85.5-1.3.25zm-.1 2.8c-.25.4-.75.5-1.1.25-2.7-1.65-6.8-2.15-9.95-1.15-.4.1-.85-.1-.95-.5-.1-.4.1-.85.5-.95 3.65-1.1 8.15-.55 11.25 1.35.4.25.5.75.25 1zm-1.25 2.65c-.2.3-.6.4-.9.2-2.35-1.45-5.3-1.75-8.8-.95-.35.1-.65-.15-.75-.45-.1-.35.15-.65.45-.75 3.8-.85 7.1-.5 9.7 1.1.35.2.4.6.3.85z" fill="white"/>
    </svg>
    <div class="spotify-text">
      <strong>üéµ Session Playlist</strong>
      Erik's Liveball Mix ‚Äî updated weekly
    </div>
  </div>
  <a class="spotify-btn" href="https://open.spotify.com/playlist/37i9dQZF1DX4dyzvuaRJ0n" target="_blank">
    Open in Spotify ‚Üí
  </a>
</div>

<!-- PLAYER VIEW -->
<div id="playerView" class="view active">
  <div id="mainContent">
    <div class="hero">
      <!-- Tennis ball top-right (yellow) -->
      <svg class="bg-ball" style="width:360px;height:360px;top:-90px;right:-80px;" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
        <circle cx="100" cy="100" r="100" fill="#c8e63c"/>
        <path d="M 30 60 Q 60 100 30 140" fill="none" stroke="white" stroke-width="7" stroke-linecap="round"/>
        <path d="M 170 60 Q 140 100 170 140" fill="none" stroke="white" stroke-width="7" stroke-linecap="round"/>
      </svg>
      <!-- Tennis ball bottom-left (yellow) -->
      <svg class="bg-ball" style="width:300px;height:300px;bottom:-50px;left:-30px;opacity:0.2;" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
        <circle cx="100" cy="100" r="100" fill="#c8e63c"/>
        <path d="M 30 60 Q 60 100 30 140" fill="none" stroke="white" stroke-width="7" stroke-linecap="round"/>
        <path d="M 170 60 Q 140 100 170 140" fill="none" stroke="white" stroke-width="7" stroke-linecap="round"/>
      </svg>
      <!-- Silver tennis ball with E ‚Äî center left -->
      <svg class="bg-ball" style="width:260px;height:260px;top:50%;left:-60px;transform:translateY(-50%);opacity:0.09;" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <radialGradient id="silverGradLB" cx="38%" cy="32%" r="65%">
            <stop offset="0%" stop-color="#ffffff"/>
            <stop offset="40%" stop-color="#c0c8d0"/>
            <stop offset="100%" stop-color="#6b7280"/>
          </radialGradient>
        </defs>
        <circle cx="100" cy="100" r="100" fill="url(#silverGradLB)"/>
        <path d="M 30 60 Q 60 100 30 140" fill="none" stroke="rgba(255,255,255,0.6)" stroke-width="7" stroke-linecap="round"/>
        <path d="M 170 60 Q 140 100 170 140" fill="none" stroke="rgba(255,255,255,0.6)" stroke-width="7" stroke-linecap="round"/>
        <text x="100" y="118" text-anchor="middle" font-family="Helvetica Neue, Arial, sans-serif" font-size="72" font-weight="900" fill="rgba(30,30,40,0.45)">E</text>
      </svg>
      <div class="pill">üéæ Up to 7 players per session</div>
      <h1>Liveball<br>with Erik</h1>
      <p>Fast-paced, coach-fed tennis for all skill levels. Pick a time, grab a spot, and come ready to play.</p>
    </div>
    <div class="section">
      <div class="section-label">Available Sessions</div>
      <div class="sessions-grid" id="sessionsGrid"></div>

      <div class="booking-form">
        <div class="slot-summary" id="slotSummary"></div>
        <h2>Your Details</h2>
        <div class="form-row">
          <div class="form-group"><label>First Name</label><input type="text" id="fname" placeholder="Alex" /></div>
          <div class="form-group"><label>Last Name</label><input type="text" id="lname" placeholder="Johnson" /></div>
        </div>
        <div class="form-row">
          <div class="form-group"><label>Email</label><input type="email" id="email" placeholder="alex@email.com" /></div>
          <div class="form-group"><label>Phone</label><input type="tel" id="phone" placeholder="+1 (555) 000-0000" /></div>
        </div>
        <div class="form-group">
          <label>Skill Level</label>
          <div class="skill-options">
            <button class="skill-btn" onclick="selectSkill(this)">Beginner</button>
            <button class="skill-btn" onclick="selectSkill(this)">Intermediate</button>
            <button class="skill-btn" onclick="selectSkill(this)">Advanced</button>
            <button class="skill-btn" onclick="selectSkill(this)">Competitive</button>
          </div>
        </div>
        <div class="form-group">
          <label>Payment</label>
          <div class="payment-options">
            <div class="payment-card" onclick="selectPayment(this,'venmo')" id="pay-venmo">
              <div class="pay-title">üí∏ Venmo</div>
              <div class="pay-desc">Send before your session</div>
            </div>
            <div class="payment-card" onclick="selectPayment(this,'arrival')" id="pay-arrival">
              <div class="pay-title">üìç Pay on Arrival</div>
              <div class="pay-desc">Cash at the court</div>
            </div>
          </div>
          <div class="pay-info venmo" id="venmoInfo">
            <strong>Venmo:</strong> <a href="https://venmo.com/u/Erik-Silverness" target="_blank" style="color:#3b5bdb;font-weight:700;text-decoration:none;border-bottom:1.5px solid #3b5bdb;">Tap here to open Venmo ‚Üí</a><br><span style="margin-top:6px;display:inline-block;">Include the note <em>"Liveball ‚Äì [your name] ‚Äì [date]"</em> so Erik knows who you are. Your spot is confirmed once payment is received.</span>
          </div>
          <div class="pay-info arrival" id="arrivalInfo">
            <strong>Pay on arrival:</strong> Bring cash or card to the court. Please arrive 5 min early. Spot is reserved but not guaranteed until payment.
          </div>
        </div>
        <button class="submit-btn" onclick="submitBooking()">Confirm Booking ‚Üí</button>
      </div>
    </div>
  </div>
  <div class="success-screen" id="successScreen">
    <div class="icon">üéæ</div>
    <h2>You're booked in!</h2>
    <p>See you on the court! Check your email for confirmation details.</p>
    <button onclick="resetForm()">Book Another Session</button>
    <div class="cancel-link" onclick="showCancelScreen()">Need to cancel?</div>
  </div>
  <div id="cancelConfirmedScreen" style="display:none;text-align:center;padding:80px 24px;"><div style="font-size:3rem;margin-bottom:16px;">üëã</div><h2 style="font-size:1.4rem;font-weight:800;margin-bottom:10px;">Spot cancelled</h2><p style="color:#666;max-width:320px;margin:0 auto 24px;font-size:0.9rem;">Your spot has been freed up. Hope to see you next time!</p><button style="background:#1a1a1a;color:#fff;border:none;border-radius:8px;padding:11px 26px;font-size:0.93rem;cursor:pointer;font-family:inherit;font-weight:600;" onclick="resetFromCancel()">Back to sessions</button></div>
  <div class="cancel-screen" id="cancelScreen">
    <div class="icon">üò¨</div>
    <h2>Cancel your spot?</h2>
    <p>This will free up your spot for someone else. This can't be undone.</p>
    <button class="cancel-confirm-btn" onclick="confirmCancel()">Yes, cancel my spot</button>
    <button class="cancel-back-btn" onclick="hideCancelScreen()">Never mind</button>
  </div>
</div>

<!-- ADMIN VIEW -->
<div id="adminView" class="view">
  <div class="admin-header">
    <div>
      <h1>‚öôÔ∏è Session Manager</h1>
      <div class="sub">Liveball with Erik ‚Äî Admin Panel</div>
    </div>
    <button class="exit-btn" onclick="exitAdmin()">‚Üê Back to site</button>
    <a href="archive.html" style="text-decoration:none;background:#4caf50;color:#fff;border:none;border-radius:8px;padding:8px 16px;font-size:0.83rem;font-weight:700;font-family:inherit;">üìÅ View Archive</a>
  </div>
  <div class="admin-body">

    <div class="share-box">
      <h3>üìé Share your booking page</h3>
      <div class="share-row">
        <input class="share-input" id="shareInput" readonly />
        <button class="copy-btn" onclick="copyLink()">Copy Link</button>
      </div>
      <div class="share-hint">Send this link to your players so they can book a spot.</div>
    </div>


    <div class="access-code-box">
      <h3>üåê Page Access</h3>
      <div class="mode-toggle-row">
        <div class="mode-card" id="modePublic" onclick="setMode('public')">
          <div class="mode-icon">üåê</div>
          <div class="mode-title">Public</div>
          <div class="mode-desc">Anyone with the link can book</div>
        </div>
        <div class="mode-card" id="modePrivate" onclick="setMode('private')">
          <div class="mode-icon">üîí</div>
          <div class="mode-title">Private</div>
          <div class="mode-desc">Players need a password to get in</div>
        </div>
      </div>
      <div id="privateCodeSection" style="display:none; margin-top:16px;">
        <div class="access-code-row">
          <input class="access-code-input" id="accessCodeInput" type="text" placeholder="e.g. TENNIS24" maxlength="20"
            oninput="this.value=this.value.toUpperCase()" />
          <button class="access-code-save" onclick="saveAccessCode()">Save Password</button>
        </div>
        <div class="access-code-hint">Share this password with your players alongside the booking link.</div>
      </div>
      <div id="publicNote" style="display:none; margin-top:12px; font-size:0.8rem; color:#aaa;">Anyone who has your link can see and book sessions.</div>
    </div>

    <div class="roster-settings-box">
      <h3>üë• Roster Visibility</h3>
      <div class="toggle-row">
        <div>
          <div class="toggle-label">Show "See who's in" on session cards</div>
          <div class="toggle-sub">Players can expand each card to see who's signed up</div>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="rosterToggle" onchange="saveRosterSettings()" />
          <span class="toggle-slider"></span>
        </label>
      </div>
      <div class="roster-pw-setting" id="rosterPwSetting">
        <label>Roster Password (optional)</label>
        <div class="toggle-sub" style="margin-bottom:8px;">Leave blank to show first names to everyone. Set a password to hide full names behind it.</div>
        <div class="roster-pw-setting-row">
          <input class="roster-pw-setting-input" id="rosterPwInput" type="text" placeholder="e.g. SQUAD2025" />
          <button class="roster-pw-save" onclick="saveRosterSettings()">Save</button>
        </div>
      </div>
    </div>

    <div class="add-card">
      <h3>‚ûï Add New Session</h3>
      <div class="form-group" style="margin-bottom:14px;">
        <label style="display:block;font-size:0.74rem;font-weight:700;color:#888;margin-bottom:5px;text-transform:uppercase;letter-spacing:0.4px;">Session Name</label>
        <input type="text" id="newName" placeholder='e.g. "Morning Grind", "Sunset Rally"' style="width:100%;padding:10px 12px;border:1.5px solid #e8e8e8;border-radius:8px;font-size:0.9rem;font-family:inherit;outline:none;background:#fafafa;" />
      </div>
      <div class="add-row">
        <div class="fg"><label>Date</label><input type="date" id="newDate" /></div>
        <div class="fg"><label>Time</label><input type="time" id="newTime" /></div>
        <div class="fg"><label>Price ($)</label><input type="number" id="newPrice" placeholder="25" min="0" step="1" /></div>
        <div class="fg"><label>Max Players</label>
          <select id="newMax">
            <option value="4" selected>4 players</option>
            <option value="5">5 players</option>
            <option value="6">6 players</option>
            <option value="7">7 players</option>
          </select>
        </div>
        <button class="add-btn" onclick="addSession()">Add ‚Üí</button>
      </div>
    </div>

    <div class="list-header">
      <h3>Your Sessions</h3>
      <span class="ct" id="sessionCount"></span>
    </div>
    <div id="adminList"></div>

    <div class="bookings-section">
      <h3>üìã All Bookings</h3>
      <table>
        <thead>
          <tr><th>Name</th><th>Email</th><th>Phone</th><th>Session</th><th>Skill</th><th>Payment</th></tr>
        </thead>
        <tbody id="bookingsTbody"></tbody>
      </table>
    </div>

    <!-- DAY-OF CHECKLIST -->
    <div class="dayof-section">
      <div class="dayof-header">
        <h3>‚úÖ Day-of Payment Checker</h3>
        <span class="paid-count" id="paidCount"></span>
      </div>
      <p style="font-size:0.82rem;color:#aaa;margin-bottom:14px;">Pick a session below, then tap each player to mark them paid (green) or not paid (red).</p>
      <div class="session-tabs" id="sessionTabs"></div>
      <div class="checklist-grid" id="checklistGrid"></div>
      <div class="dayof-legend">Tap a player card to toggle their payment status. Changes are saved automatically.</div>
    </div>

  </div>
</div>

<script>
  const PASS = 'silvererik27'; // ‚Üê Change this to your own password!
  const SK = 'lbe_sessions';
  const BK = 'lbe_bookings';

  let sessions = [], bookings = [];
  let selId = null, selSkill = null, selPay = null, lastBookingId = null;

  const DAYS = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
  const MONTHS = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];

  function fmtDate(d) {
    const [y,m,day] = d.split('-').map(Number);
    const dt = new Date(y, m-1, day);
    return `${DAYS[dt.getDay()]}, ${MONTHS[m-1]} ${day}`;
  }
  function fmtTime(t) {
    const [h,m] = t.split(':').map(Number);
    return `${h%12||12}:${String(m).padStart(2,'0')} ${h>=12?'PM':'AM'}`;
  }
  function uid() { return Date.now().toString(36)+Math.random().toString(36).slice(2,5); }

  function toast(msg) {
    const el = document.getElementById('toast');
    el.textContent = msg;
    el.classList.add('show');
    setTimeout(()=>el.classList.remove('show'), 2600);
  }

  function load() {
    try {
      sessions = JSON.parse(localStorage.getItem(SK)||'[]');
      bookings = JSON.parse(localStorage.getItem(BK)||'[]');
    } catch(e){ sessions=[]; bookings=[]; }
  }
  function save() {
    localStorage.setItem(SK, JSON.stringify(sessions));
    localStorage.setItem(BK, JSON.stringify(bookings));
  }

  // LOGIN
  function openLogin() {
    document.getElementById('loginModal').classList.add('open');
    document.getElementById('pwInput').value='';
    document.getElementById('loginErr').style.display='none';
    setTimeout(()=>document.getElementById('pwInput').focus(),100);
  }
  function closeLogin() { document.getElementById('loginModal').classList.remove('open'); }
  function doLogin() {
    if(document.getElementById('pwInput').value===PASS){
      closeLogin(); showAdmin();
    } else {
      document.getElementById('loginErr').style.display='block';
      document.getElementById('pwInput').value='';
      document.getElementById('pwInput').focus();
    }
  }

  // ADMIN
  function showAdmin() {
    document.getElementById('playerView').classList.remove('active');
    document.getElementById('adminView').classList.add('active');
    document.getElementById('shareInput').value = window.location.href;
    updateCodeStatus();
    initRosterSettings();
    renderAdmin(); renderBookings();
  }
  function exitAdmin() {
    document.getElementById('adminView').classList.remove('active');
    document.getElementById('playerView').classList.add('active');
  }
  function copyLink() {
    document.getElementById('shareInput').select();
    document.execCommand('copy');
    toast('‚úÖ Link copied! Send it to your players.');
  }

  function addSession() {
    const date = document.getElementById('newDate').value;
    const time = document.getElementById('newTime').value;
    const max  = parseInt(document.getElementById('newMax').value);
    const price = parseFloat(document.getElementById('newPrice').value) || 0;
    const name  = document.getElementById('newName').value.trim();
    if(!date||!time){ toast('‚ö†Ô∏è Please pick a date and time.'); return; }
    sessions.push({id:uid(), date, time, max, price, name, booked:0});
    sessions.sort((a,b)=>(a.date+a.time).localeCompare(b.date+b.time));
    save();
    renderAdmin(); renderPlayer();
    document.getElementById('newDate').value='';
    document.getElementById('newTime').value='';
    document.getElementById('newPrice').value='';
    document.getElementById('newName').value='';
    toast('‚úÖ Session added!');
  }

  let editingId = null;

  function openEditModal(id) {
    const s = sessions.find(s=>s.id===id);
    if(!s) return;
    editingId = id;
    document.getElementById('editName').value = s.name || '';
    document.getElementById('editDate').value = s.date;
    document.getElementById('editTime').value = s.time;
    document.getElementById('editPrice').value = s.price || '';
    document.getElementById('editMax').value = s.max;
    document.getElementById('editModal').classList.add('open');
  }

  function closeEditModal() {
    document.getElementById('editModal').classList.remove('open');
    editingId = null;
  }

  function saveEdit() {
    const s = sessions.find(s=>s.id===editingId);
    if(!s) return;
    const date = document.getElementById('editDate').value;
    const time = document.getElementById('editTime').value;
    if(!date||!time){ toast('‚ö†Ô∏è Please fill in date and time.'); return; }
    s.name  = document.getElementById('editName').value.trim();
    s.date  = date;
    s.time  = time;
    s.price = parseFloat(document.getElementById('editPrice').value) || 0;
    s.max   = parseInt(document.getElementById('editMax').value);
    sessions.sort((a,b)=>(a.date+a.time).localeCompare(b.date+b.time));
    save();
    renderAdmin(); renderPlayer();
    closeEditModal();
    toast('‚úÖ Session updated!');
  }

  function deleteSession(id) {
    if(!confirm('Delete this session?')) return;
    sessions = sessions.filter(s=>s.id!==id);
    save(); renderAdmin(); renderPlayer();
    toast('üóëÔ∏è Session removed.');
  }

  function renderAdmin() {
    const el = document.getElementById('adminList');
    document.getElementById('sessionCount').textContent = `${sessions.length} session${sessions.length!==1?'s':''}`;
    if(!sessions.length){ el.innerHTML='<div class="admin-empty">No sessions yet ‚Äî add one above!</div>'; return; }
    el.innerHTML = sessions.map(s=>`
      <div class="admin-row">
        <div class="row-info">
          ${s.name ? `<div class="sname" style="font-size:1rem;font-weight:800;margin-bottom:3px;">${s.name}</div>` : ''}
          <div class="dt" style="font-size:0.82rem;color:#999;">${fmtDate(s.date)} ¬∑ ${fmtTime(s.time)}${s.price ? `<span class='price-tag'>$${s.price}</span>` : ''}</div>
          <div class="sp">${s.booked}/${s.max} spots filled ¬∑ ${s.max-s.booked} open</div>
          <div class="mini-bar"><div class="mini-fill" style="width:${(s.booked/s.max)*100}%"></div></div>
        </div>
        <div style="display:flex;gap:6px;">
          <button class="edit-btn" onclick="openEditModal('${s.id}')">‚úèÔ∏è Edit</button>
          <button class="del-btn" onclick="deleteSession('${s.id}')">Delete</button>
        </div>
      </div>`).join('');
  }

  function renderBookings() {
    const tb = document.getElementById('bookingsTbody');
    if(!bookings.length){ tb.innerHTML='<tr><td colspan="6" class="no-data">No bookings yet.</td></tr>'; return; }
    tb.innerHTML = bookings.map(b=>{
      const s = sessions.find(s=>s.id===b.sid);
      const label = s ? `${s.name ? s.name+' ¬∑ ' : ''}${fmtDate(s.date)} ¬∑ ${fmtTime(s.time)}` : b.slabel||'‚Äî';
      return `<tr>
        <td><strong>${b.fname} ${b.lname}</strong></td>
        <td>${b.email}</td>
        <td>${b.phone||'‚Äî'}</td>
        <td>${label}</td>
        <td><span class="tag tag-skill">${b.skill||'‚Äî'}</span></td>
        <td><span class="tag tag-${b.pay}">${b.pay==='venmo'?'üí∏ Venmo':'üìç Arrival'}</span></td>
      </tr>`;
    }).join('');
    renderDayOf();
  }

  let activeCheckSession = null;

  function renderDayOf() {
    const tabsEl = document.getElementById('sessionTabs');
    const gridEl = document.getElementById('checklistGrid');

    if(!sessions.length){ tabsEl.innerHTML=''; gridEl.innerHTML='<div class="checklist-empty">No sessions yet.</div>'; return; }

    // Build tabs for all sessions that have at least one booking
    const sessionsWithBookings = sessions.filter(s => bookings.some(b=>b.sid===s.id));
    if(!sessionsWithBookings.length){
      tabsEl.innerHTML='';
      gridEl.innerHTML='<div class="checklist-empty">No bookings yet ‚Äî they\'ll appear here once people sign up.</div>';
      document.getElementById('paidCount').textContent='';
      return;
    }

    // Default to first session if none selected
    if(!activeCheckSession || !sessionsWithBookings.find(s=>s.id===activeCheckSession)){
      activeCheckSession = sessionsWithBookings[0].id;
    }

    tabsEl.innerHTML = sessionsWithBookings.map(s=>`
      <button class="session-tab ${s.id===activeCheckSession?'active':''}" onclick="switchCheckSession('${s.id}')">
        ${s.name ? s.name+' ¬∑ ' : ''}${fmtDate(s.date)} ¬∑ ${fmtTime(s.time)}
      </button>`).join('');

    renderChecklist();
  }

  function switchCheckSession(id) {
    activeCheckSession = id;
    renderDayOf();
  }

  function renderChecklist() {
    const gridEl = document.getElementById('checklistGrid');
    const countEl = document.getElementById('paidCount');
    const players = bookings.filter(b=>b.sid===activeCheckSession);

    if(!players.length){
      gridEl.innerHTML='<div class="checklist-empty">No bookings for this session.</div>';
      countEl.textContent='';
      return;
    }

    const paidNum = players.filter(b=>b.payConfirmed===true).length;
    const unpaidNum = players.filter(b=>b.payConfirmed===false).length;
    countEl.textContent = `${paidNum} paid ¬∑ ${unpaidNum} not paid ¬∑ ${players.length - paidNum - unpaidNum} unchecked`;

    gridEl.innerHTML = players.map(b=>{
      const status = b.payConfirmed === true ? 'paid' : b.payConfirmed === false ? 'unpaid' : 'neutral';
      const statusLabel = b.payConfirmed === true ? '‚úÖ Paid' : b.payConfirmed === false ? '‚ùå Not Paid' : '¬∑ Tap to mark ¬∑';
      const payMethod = b.pay === 'venmo' ? 'üí∏ Venmo' : 'üìç Pay on Arrival';
      return `
        <div class="player-tile ${status}" onclick="togglePaid('${b.id}')">
          <div class="pname">${b.fname} ${b.lname}</div>
          <div class="pdetail">${payMethod} ¬∑ ${b.skill||'‚Äî'}</div>
          <div class="pstatus">${statusLabel}</div>
        </div>`;
    }).join('');
  }

  function togglePaid(bookingId) {
    const b = bookings.find(b=>b.id===bookingId);
    if(!b) return;
    if(b.payConfirmed === true) b.payConfirmed = false;
    else if(b.payConfirmed === false) b.payConfirmed = undefined;
    else b.payConfirmed = true;
    save();
    renderChecklist();
  }

  // PLAYER
  function renderPlayer() {
    const grid = document.getElementById('sessionsGrid');
    const today = new Date().toISOString().slice(0,10);
    const upcoming = sessions.filter(s=>s.date>=today);
    const rosterOn = localStorage.getItem('lbe_roster_on') === 'true';
    const rosterPw = localStorage.getItem('lbe_roster_pw') || '';
    if(!upcoming.length){
      grid.innerHTML='<div class="empty-state"><div class="big">üéæ</div>No sessions scheduled yet ‚Äî check back soon!</div>';
      return;
    }
    grid.innerHTML = upcoming.map(s=>{
      const full = s.booked>=s.max;
      const sessionBookings = bookings.filter(b=>b.sid===s.id);
      const rosterHtml = rosterOn ? buildRosterHtml(s.id, sessionBookings, rosterPw) : '';
      return `<div class="session-card ${full?'is-full':''} ${selId===s.id?'selected':''}" id="card-${s.id}" onclick="${full?'':'pickSession(\''+s.id+'\')'}">
        <div class="card-badge ${full?'badge-full':'badge-open'}">${full?'Full':'Open'}</div>
        ${s.name ? `<div class="card-name">${s.name}</div>` : ''}
        <div class="card-date">${fmtDate(s.date)} ¬∑ ${fmtTime(s.time)}</div>
        ${s.price ? `<div class='card-price'>$${s.price} per person</div>` : ''}
        <div class="card-spots">${s.booked} / ${s.max} spots taken</div>
        <div class="spots-bar"><div class="spots-fill" style="width:${(s.booked/s.max)*100}%"></div></div>
        ${rosterHtml}
      </div>`;
    }).join('');
  }

  function buildRosterHtml(sid, sessionBookings, rosterPw) {
    if(!sessionBookings.length) return '';
    const count = sessionBookings.length;
    const firstNames = sessionBookings.map(b=>`<span class="name-chip">${b.fname}</span>`).join('');
    const pwSection = rosterPw ? `
      <div class="roster-pw-box">
        <p>Enter roster password to see full names</p>
        <div class="roster-pw-row">
          <input class="roster-pw-input" id="rpw-${sid}" placeholder="Roster password" onclick="event.stopPropagation()" />
          <button class="roster-pw-btn" onclick="event.stopPropagation();unlockRoster('${sid}')">Unlock</button>
        </div>
      </div>` : '';
    return `
      <button class="roster-toggle" id="rt-${sid}" onclick="event.stopPropagation();toggleRoster('${sid}')">
        <svg width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M2 4l4 4 4-4" stroke="#4caf50" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
        See who's in (${count})
      </button>
      <div class="roster-expand" id="re-${sid}">
        <div class="roster-inner">
          <div class="r-title">Signed up</div>
          <div class="names-list" id="rnames-${sid}">${firstNames}</div>
          ${pwSection}
        </div>
      </div>`;
  }

  function toggleRoster(sid) {
    const expand = document.getElementById('re-'+sid);
    const btn = document.getElementById('rt-'+sid);
    const open = expand.classList.toggle('open');
    btn.classList.toggle('open', open);
  }

  function unlockRoster(sid) {
    const rosterPw = localStorage.getItem('lbe_roster_pw') || '';
    const input = document.getElementById('rpw-'+sid);
    if(!input) return;
    if(input.value.trim().toUpperCase() === rosterPw.toUpperCase()) {
      const sessionBookings = bookings.filter(b=>b.sid===sid);
      const fullNames = sessionBookings.map(b=>`<span class="name-chip">${b.fname} ${b.lname}</span>`).join('');
      document.getElementById('rnames-'+sid).innerHTML = fullNames;
      input.closest('.roster-pw-box').remove();
      toast('‚úÖ Roster unlocked!');
    } else {
      input.style.borderColor = '#ef4444';
      input.value = '';
      input.placeholder = 'Wrong password';
      setTimeout(()=>{ input.style.borderColor=''; input.placeholder='Roster password'; }, 1500);
    }
  }

  function saveRosterSettings() {
    const on = document.getElementById('rosterToggle').checked;
    const pw = (document.getElementById('rosterPwInput').value || '').trim();
    localStorage.setItem('lbe_roster_on', on);
    localStorage.setItem('lbe_roster_pw', pw);
    document.getElementById('rosterPwSetting').classList.toggle('visible', on);
    renderPlayer();
    toast(on ? '‚úÖ Roster visibility on!' : 'üôà Roster hidden from players.');
  }

  function initRosterSettings() {
    const on = localStorage.getItem('lbe_roster_on') === 'true';
    const pw = localStorage.getItem('lbe_roster_pw') || '';
    document.getElementById('rosterToggle').checked = on;
    document.getElementById('rosterPwInput').value = pw;
    document.getElementById('rosterPwSetting').classList.toggle('visible', on);
  }

  function pickSession(id) {
    selId = id;
    document.querySelectorAll('.session-card').forEach(c=>c.classList.remove('selected'));
    document.getElementById('card-'+id).classList.add('selected');
    const s = sessions.find(s=>s.id===id);
    const sum = document.getElementById('slotSummary');
    sum.style.display='block';
    sum.textContent=`‚úÖ Selected: ${s.name ? s.name+' ¬∑ ' : ''}${fmtDate(s.date)} at ${fmtTime(s.time)}${s.price ? ' ¬∑ $'+s.price+' per person' : ''}`;
    document.querySelector('.booking-form').scrollIntoView({behavior:'smooth',block:'center'});
  }

  function selectSkill(btn) {
    document.querySelectorAll('.skill-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active'); selSkill=btn.textContent;
  }

  function selectPayment(card, type) {
    document.querySelectorAll('.payment-card').forEach(c=>c.classList.remove('active'));
    card.classList.add('active'); selPay=type;
    document.getElementById('venmoInfo').style.display=type==='venmo'?'block':'none';
    document.getElementById('arrivalInfo').style.display=type==='arrival'?'block':'none';
  }

  function submitBooking() {
    const fname=document.getElementById('fname').value.trim();
    const lname=document.getElementById('lname').value.trim();
    const email=document.getElementById('email').value.trim();
    const phone=document.getElementById('phone').value.trim();
    if(!selId){ toast('‚ö†Ô∏è Please select a session.'); return; }
    if(!fname||!lname){ toast('‚ö†Ô∏è Please enter your name.'); return; }
    if(!email){ toast('‚ö†Ô∏è Please enter your email.'); return; }
    if(!selPay){ toast('‚ö†Ô∏è Please choose a payment method.'); return; }
    const s=sessions.find(s=>s.id===selId);
    if(!s||s.booked>=s.max){ toast('‚ùå That session is now full.'); return; }
    s.booked++;

    const newBooking = {id:uid(), sid:s.id, slabel:`${fmtDate(s.date)} ¬∑ ${fmtTime(s.time)}`, fname, lname, email, phone, skill:selSkill||'‚Äî', pay:selPay, ts:new Date().toISOString()};
    bookings.push(newBooking);
    lastBookingId = newBooking.id;
    save();

    // Send to Formspree
    fetch('https://formspree.io/f/xnjbgdgq', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
      body: JSON.stringify({
        name: `${fname} ${lname}`,
        email,
        phone: phone || '‚Äî',
        session: `${s.name ? s.name + ' ¬∑ ' : ''}${fmtDate(s.date)} at ${fmtTime(s.time)}`,
        skill: selSkill || '‚Äî',
        payment: selPay === 'venmo' ? 'Venmo' : 'Pay on Arrival'
      })
    }).catch(()=>{}); // silent fail ‚Äî booking still goes through

    document.getElementById('mainContent').style.display='none';
    document.getElementById('successScreen').style.display='block';
    window.scrollTo({top:0,behavior:'smooth'});
  }

  function resetFromCancel() {
    document.getElementById('cancelConfirmedScreen').style.display='none';
    document.getElementById('mainContent').style.display='block';
    window.scrollTo({top:0,behavior:'smooth'});
  }
  function showCancelScreen() {
    document.getElementById('successScreen').style.display='none';
    document.getElementById('cancelScreen').style.display='block';
  }
  function hideCancelScreen() {
    document.getElementById('cancelScreen').style.display='none';
    document.getElementById('successScreen').style.display='block';
  }
  function confirmCancel() {
    const b = bookings.find(b=>b.id===lastBookingId);
    if(b) {
      const s = sessions.find(s=>s.id===b.sid);
      if(s && s.booked > 0) s.booked--;
      bookings = bookings.filter(b=>b.id!==lastBookingId);
      save();
    }
    document.getElementById('cancelScreen').style.display='none';
    document.getElementById('cancelConfirmedScreen').style.display='block';
    lastBookingId = null;
    renderPlayer();
  }

  function resetForm() {
    selId=null; selSkill=null; selPay=null;
    document.getElementById('mainContent').style.display='block';
    document.getElementById('successScreen').style.display='none';
    document.getElementById('slotSummary').style.display='none';
    ['fname','lname','email','phone'].forEach(id=>document.getElementById(id).value='');
    document.querySelectorAll('.skill-btn').forEach(b=>b.classList.remove('active'));
    document.querySelectorAll('.payment-card').forEach(c=>c.classList.remove('active'));
    document.getElementById('venmoInfo').style.display='none';
    document.getElementById('arrivalInfo').style.display='none';
    document.getElementById('cancelScreen').style.display='none';
    document.getElementById('cancelConfirmedScreen').style.display='none';
    renderPlayer();
  }


  // ‚îÄ‚îÄ‚îÄ ACCESS GATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const AK = 'lbe_access_code';
  const GK = 'lbe_granted';

  function getAccessCode() {
    return localStorage.getItem(AK) || '';
  }

  function checkGate() {
    const code = getAccessCode();
    const input = document.getElementById('gateInput').value.trim().toUpperCase();
    if(!code) {
      // No code set ‚Äî page is public, let anyone in
      document.getElementById('gateScreen').style.display = 'none';
      return;
    }
    if(input === code.toUpperCase()) {
      sessionStorage.setItem(GK, code.toUpperCase());
      document.getElementById('gateScreen').style.display = 'none';
    } else {
      const el = document.getElementById('gateInput');
      el.classList.add('error');
      document.getElementById('gateErr').style.display = 'block';
      el.value = '';
      setTimeout(()=>el.classList.remove('error'), 400);
    }
  }

  function initGate() {
    const mode = localStorage.getItem('lbe_mode') || 'public';
    const code = getAccessCode();
    if(mode === 'public' || !code) {
      document.getElementById('gateScreen').style.display = 'none';
      return;
    }
    const granted = sessionStorage.getItem(GK);
    if(granted && granted === code.toUpperCase()) {
      document.getElementById('gateScreen').style.display = 'none';
    } else {
      sessionStorage.removeItem(GK);
      document.getElementById('gateScreen').style.display = 'flex';
    }
  }

  function setMode(mode) {
    localStorage.setItem('lbe_mode', mode);
    if(mode === 'public') {
      localStorage.removeItem(AK);
      sessionStorage.removeItem(GK);
    }
    updateCodeStatus();
    if(mode === 'public') toast('üåê Page is now public ‚Äî anyone with the link can book.');
    else toast('üîí Page is now private ‚Äî set a password below.');
  }

  function saveAccessCode() {
    const val = document.getElementById('accessCodeInput').value.trim().toUpperCase();
    if(!val) { toast('‚ö†Ô∏è Please enter a password first.'); return; }
    localStorage.setItem(AK, val);
    localStorage.setItem('lbe_mode', 'private');
    updateCodeStatus();
    toast('‚úÖ Password saved! Share it with your players.');
  }

  function clearAccessCode() {
    localStorage.removeItem(AK);
    document.getElementById('accessCodeInput').value = '';
    updateCodeStatus();
  }

  function updateCodeStatus() {
    const mode = localStorage.getItem('lbe_mode') || 'public';
    const code = getAccessCode();
    const pubCard = document.getElementById('modePublic');
    const privCard = document.getElementById('modePrivate');
    const codeSection = document.getElementById('privateCodeSection');
    const pubNote = document.getElementById('publicNote');
    if(!pubCard) return;

    pubCard.classList.remove('active-public','active-private');
    privCard.classList.remove('active-public','active-private');

    if(mode === 'private') {
      privCard.classList.add('active-private');
      codeSection.style.display = 'block';
      pubNote.style.display = 'none';
      if(code) document.getElementById('accessCodeInput').value = code;
    } else {
      pubCard.classList.add('active-public');
      codeSection.style.display = 'none';
      pubNote.style.display = 'block';
    }
  }

  function archiveExpiredSessions() {
    const now = Date.now();
    const archive = JSON.parse(localStorage.getItem('lbe_archive') || '[]');
    const remaining = [];
    sessions.forEach(s => {
      const [y,m,d] = s.date.split('-').map(Number);
      const [h,min] = s.time.split(':').map(Number);
      const sessionEnd = new Date(y, m-1, d, h, min).getTime() + 24*60*60*1000;
      if(now > sessionEnd) {
        // Move to archive with bookings attached
        const sessionBookings = bookings.filter(b=>b.sid===s.id);
        archive.push({ ...s, archivedAt: new Date().toISOString(), attendees: sessionBookings });
      } else {
        remaining.push(s);
      }
    });
    if(remaining.length !== sessions.length) {
      sessions = remaining;
      bookings = bookings.filter(b => sessions.some(s=>s.id===b.sid));
      localStorage.setItem('lbe_archive', JSON.stringify(archive));
      save();
    }
  }

  load();
  archiveExpiredSessions();
  renderPlayer();
  initGate();
  initRosterSettings();
</script>
<!-- EDIT SESSION MODAL -->
<div class="edit-modal-bg" id="editModal">
  <div class="edit-modal">
    <h2>‚úèÔ∏è Edit Session</h2>
    <div class="fg">
      <label>Session Name</label>
      <input type="text" id="editName" placeholder='e.g. "Morning Grind"' />
    </div>
    <div class="edit-modal-row">
      <div class="fg"><label>Date</label><input type="date" id="editDate" /></div>
      <div class="fg"><label>Time</label><input type="time" id="editTime" /></div>
    </div>
    <div class="edit-modal-row">
      <div class="fg"><label>Price ($)</label><input type="number" id="editPrice" min="0" step="1" /></div>
      <div class="fg"><label>Max Players</label>
        <select id="editMax">
          <option value="4">4 players</option>
          <option value="5">5 players</option>
          <option value="6">6 players</option>
          <option value="7">7 players</option>
        </select>
      </div>
    </div>
    <div class="edit-modal-btns">
      <button class="edit-cancel" onclick="closeEditModal()">Cancel</button>
      <button class="edit-save" onclick="saveEdit()">Save Changes ‚Üí</button>
    </div>
  </div>
</div>

</body>
</html>
